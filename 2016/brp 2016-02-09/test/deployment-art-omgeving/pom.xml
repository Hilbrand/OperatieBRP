<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>brp-parent</artifactId>
        <groupId>nl.bzk.brp</groupId>
        <version>96-SNAPSHOT</version>
        <relativePath>../../brp-parent</relativePath>
    </parent>
    <groupId>nl.bzk.brp.test</groupId>
    <artifactId>brp-test-art-omgeving</artifactId>
    <packaging>jar</packaging>
    <name>BRP Test Deployment ART omgeving</name>
    <description>Dit project wordt gebruikt om lokaal je ART test omgeving in te kunnen richten. SoapUI voorzien van de
        juiste JAR's en het gebruiken van de laatste versie van de ART-Engine
    </description>
    <properties>
        <!--
        GEEN LATEST MEER GEBRUIKEN AUB, ONDERSTAANDE PROPERTIES WORDEN GEVULD VANUIT PROFILE
        <project.brp.database.versie>LATEST</project.brp.database.versie>
        <project.brp.art.engine.versie>LATEST</project.brp.art.engine.versie>
        <project.brp.art.data.versie>LATEST</project.brp.art.data.versie>
        -->
        <brp.release.version>94</brp.release.version>

        <!-- Properties die overschreven worden vanuit Jenkins/command-line -->
        <dbhost>localhost</dbhost>
        <dbprefix>art-</dbprefix>
        <dbusername>brp</dbusername>
        <dbpassword>brp</dbpassword>
        <dbdriver>org.postgresql.Driver</dbdriver>

        <!-- Zet hier de soapUI versie neer die je gebruikt, zodat het pad waar de jar files die voor de art-engine nodig zijn correct is -->
        <soapui.version>5.0.0</soapui.version>
        <soapui.directory.macosx>/Applications/SoapUI-${soapui.version}.app/Contents/java/app/lib/
        </soapui.directory.macosx>
        <soapui.directory.windows>C:\Program Files (x86)\SmartBear\SoapUI-${soapui.version}\lib\
        </soapui.directory.windows>
        <soapui.directory.linux>/opt/soapui-${soapui.version}/lib/</soapui.directory.linux>
        <sqlfile>${project.build.directory}/brp-testdata/art-testdata.sql</sqlfile>

        <!-- DB Properties -->
        <db.kern.driver>${dbdriver}</db.kern.driver>
        <db.kern.url>jdbc:postgresql://${dbhost}/${dbprefix}brp</db.kern.url>
        <db.kern.username>${dbusername}</db.kern.username>
        <db.kern.password>${dbpassword}</db.kern.password>

        <db.lev.driver>${dbdriver}</db.lev.driver>
        <db.lev.url>jdbc:postgresql://${dbhost}/${dbprefix}brp-lev</db.lev.url>
        <db.lev.username>${dbusername}</db.lev.username>
        <db.lev.password>${dbpassword}</db.lev.password>

        <db.ber.driver>${dbdriver}</db.ber.driver>
        <db.ber.url>jdbc:postgresql://${dbhost}/${dbprefix}brp-ber</db.ber.url>
        <db.ber.username>${dbusername}</db.ber.username>
        <db.ber.password>${dbpassword}</db.ber.password>

        <db.activemq.driver>${dbdriver}</db.activemq.driver>
        <db.activemq.url>jdbc:postgresql://${dbhost}/${dbprefix}activemq</db.activemq.url>
        <db.activemq.username>${dbusername}</db.activemq.username>
        <db.activemq.password>${dbpassword}</db.activemq.password>

        <db.afnemer.driver>${dbdriver}</db.afnemer.driver>
        <db.afnemer.url>jdbc:postgresql://${dbhost}/${dbprefix}brp</db.afnemer.url>
        <db.afnemer.username>${dbusername}</db.afnemer.username>
        <db.afnemer.password>${dbpassword}</db.afnemer.password>

        <art.engine.directory>${project.basedir}/art-engine</art.engine.directory>
        <art.afhankelijkheden.directory>${art.engine.directory}/afhankelijkheden</art.afhankelijkheden.directory>

        <!-- Er zou een "Test-Parent" pom moete bestaan zodat testers die enkel test hebben uitgechecked ook versie hebben -->
        <postgres.version>9.2-1004-jdbc41</postgres.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>${postgres.version}</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jexcelapi</groupId>
            <artifactId>jxl</artifactId>
            <version>2.6.12</version>
        </dependency>
        <dependency>
            <groupId>jp.skypencil.java-diff-utils</groupId>
            <artifactId>diffutils</artifactId>
            <version>1.4.1</version>
        </dependency>
        <dependency>
            <groupId>nl.bzk.brp.art.framework</groupId>
            <artifactId>brp-art-framework-engine</artifactId>
            <version>${project.brp.art.engine.versie}</version>
        </dependency>
        <dependency>
            <groupId>nl.bzk.brp.art.data</groupId>
            <artifactId>brp-art-data-resources</artifactId>
            <version>${project.brp.art.data.versie}</version>
        </dependency>
        <dependency>
            <groupId>nl.bzk.brp.art.data</groupId>
            <artifactId>brp-art-data-testdata</artifactId>
            <version>${project.brp.art.data.versie}</version>
            <type>zip</type>
            <classifier>sql</classifier>
        </dependency>
        <dependency>
            <groupId>nl.bzk.brp.algemeen.opslag</groupId>
            <artifactId>brp-algemeen-opslag-database</artifactId>
            <version>${project.brp.database.versie}</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.8</version>
                <executions>
                    <execution>
                        <id>extract-ARTengine</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>unpack</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>nl.bzk.brp.art.framework</groupId>
                                    <artifactId>brp-art-framework-engine</artifactId>
                                    <overWrite>true</overWrite>
                                    <includes>**/*</includes>
                                    <excludes>Voorbeeld*/**/*</excludes>
                                </artifactItem>
                            </artifactItems>
                            <outputDirectory>${art.engine.directory}</outputDirectory>
                        </configuration>
                    </execution>
                    <execution>
                        <id>unpack-templates</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>unpack</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>nl.bzk.brp.art.data</groupId>
                                    <artifactId>brp-art-data-resources</artifactId>
                                    <version>${project.brp.art.data.versie}</version>
                                    <overWrite>true</overWrite>
                                    <outputDirectory>${art.afhankelijkheden.directory}</outputDirectory>
                                    <includes>RequestTemplates/**.xml, SQL/**.sql</includes>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>${art.afhankelijkheden.directory}</directory>
                        </fileset>
                        <fileset>
                            <directory>${art.engine.directory}</directory>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>

        </plugins>
    </build>
    <profiles>
        <profile>
            <id>nieuwste</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <!--GEEN LATEST MEER GEBRUIKEN AUB-->
                <project.brp.database.versie>${project.version}</project.brp.database.versie>
                <project.brp.art.data.versie>${project.version}</project.brp.art.data.versie>
                <project.brp.art.engine.versie>${project.version}</project.brp.art.engine.versie>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>versions-maven-plugin</artifactId>
                        <version>1.2</version>
                        <executions>
                            <execution>
                                <id>update-versions</id>
                                <phase>initialize</phase>
                                <goals>
                                    <!-- <goal>update-properties</goal>-->
                                    <goal>use-latest-versions</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <includesList>nl.bzk.brp</includesList>
                            <generateBackupPoms>false</generateBackupPoms>
                            <allowSnapshots>true</allowSnapshots>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>release</id>
            <properties>
                <!--GEEN LATEST MEER GEBRUIKEN AUB-->
                <project.brp.database.versie>${brp.release.version}</project.brp.database.versie>
                <project.brp.art.data.versie>${brp.release.version}</project.brp.art.data.versie>
                <project.brp.art.engine.versie>${brp.release.version}</project.brp.art.engine.versie>
            </properties>
        </profile>
        <profile>
            <id>brp-soapui-mac</id>
            <activation>
                <os>
                    <family>macosx</family>
                    <arch>x86</arch>
                </os>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>copy-jars</id>
                                <phase>validate</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <target name="copy">
                                        <echo message="Kopieer ondersteunende jar's naar SoapUI: ${soapui.directory.macosx}"/>
                                        <echo message="Kopieer: ${org.postgresql:postgresql:jar}"/>
                                        <copy file="${org.postgresql:postgresql:jar}"
                                              todir="${soapui.directory.macosx}"/>
                                        <echo message="Kopieer: ${net.sourceforge.jexcelapi:jxl:jar}"/>
                                        <copy file="${net.sourceforge.jexcelapi:jxl:jar}"
                                              todir="${soapui.directory.macosx}"/>
                                        <echo message="Kopieer: ${jp.skypencil.java-diff-utils:diffutils:jar}"/>
                                        <copy file="${jp.skypencil.java-diff-utils:diffutils:jar}"
                                              todir="${soapui.directory.macosx}"/>
                                    </target>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>brp-soapui-windows</id>
            <activation>
                <os>
                    <family>windows</family>
                    <arch>x86</arch>
                </os>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>copy-jars</id>
                                <phase>validate</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <target name="copy">
                                        <echo message="Kopieer ondersteunende jar's naar SoapUI: ${soapui.directory.windows}"/>
                                        <echo message="Kopieer: ${org.postgresql:postgresql:jar}"/>
                                        <copy file="${org.postgresql:postgresql:jar}"
                                              todir="${soapui.directory.windows}"/>
                                        <echo message="Kopieer: ${net.sourceforge.jexcelapi:jxl:jar}"/>
                                        <copy file="${net.sourceforge.jexcelapi:jxl:jar}"
                                              todir="${soapui.directory.windows}"/>
                                        <echo message="Kopieer: ${jp.skypencil.java-diff-utils:diffutils:jar}"/>
                                        <copy file="${jp.skypencil.java-diff-utils:diffutils:jar}"
                                              todir="${soapui.directory.windows}"/>
                                    </target>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>brp-soapui-linux</id>
            <activation>
                <os>
                    <family>linux</family>
                    <arch>x86</arch>
                </os>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>copy-jars</id>
                                <phase>validate</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <target name="copy">
                                        <echo message="Kopieer ondersteunende jar's naar SoapUI: ${soapui.directory.linux}"/>
                                        <echo message="Kopieer: ${org.postgresql:postgresql:jar}"/>
                                        <copy file="${org.postgresql:postgresql:jar}"
                                              todir="${soapui.directory.linux}"/>
                                        <echo message="Kopieer: ${net.sourceforge.jexcelapi:jxl:jar}"/>
                                        <copy file="${net.sourceforge.jexcelapi:jxl:jar}"
                                              todir="${soapui.directory.linux}"/>
                                        <echo message="Kopieer: ${jp.skypencil.java-diff-utils:diffutils:jar}"/>
                                        <copy file="${jp.skypencil.java-diff-utils:diffutils:jar}"
                                              todir="${soapui.directory.linux}"/>
                                    </target>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <!-- Profiel 3 verschillende databases aan te maken: xx-brp, xx-brp-lev en xx-brp-ber -->
            <id>maak-databases</id>
            <activation>
                <property>
                    <name>maak-databases</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.liquibase</groupId>
                        <artifactId>liquibase-maven-plugin</artifactId>
                        <executions>

                            <!-- drop eerst alle schema's om 'achterblijvers' te voorkomen -->
                            <execution>
                                <id>drop-kern-schemas</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/drop-alle-schemas.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <execution>
                                <id>maak-ber-schemas</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/drop-alle-schemas.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.ber.driver}</driver>
                                    <url>${db.ber.url}</url>
                                    <username>${db.ber.username}</username>
                                    <password>${db.ber.password}</password>
                                </configuration>
                            </execution>
                            <execution>
                                <id>maak-lev-schemas</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/drop-alle-schemas.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.lev.driver}</driver>
                                    <url>${db.lev.url}</url>
                                    <username>${db.lev.username}</username>
                                    <password>${db.lev.password}</password>
                                </configuration>
                            </execution>


                            <execution>
                                <id>maak-kern-database</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/kern-database.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <execution>
                                <id>maak-lev-database</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/lev-database.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.lev.driver}</driver>
                                    <url>${db.lev.url}</url>
                                    <username>${db.lev.username}</username>
                                    <password>${db.lev.password}</password>
                                </configuration>
                            </execution>
                            <execution>
                                <id>maak-ber-database</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/ber-database.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.ber.driver}</driver>
                                    <url>${db.ber.url}</url>
                                    <username>${db.ber.username}</username>
                                    <password>${db.ber.password}</password>
                                </configuration>
                            </execution>

                            <!-- Nodig voor de art's -->
                            <execution>
                                <id>update-database</id>
                                <phase>generate-test-sources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>false</dropFirst>
                                    <changeLogFile>changeset/test-database-update.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>

                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>create-test-db</id>
            <activation>
                <property>
                    <name>create-test-db</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <version>2.8</version>
                        <executions>
                            <!-- Pak de dependencies uit met daarin alle SQL bestanden voor de database en de vulling -->
                            <execution>
                                <id>unpack-brp-algemeen-opslag-database</id>
                                <phase>generate-resources</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp.algemeen.opslag</groupId>
                                            <artifactId>brp-algemeen-opslag-database</artifactId>
                                            <version>${project.brp.database.versie}</version>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/brp-algemeen-opslag-database</outputDirectory>
                                            <includes>**/*.sql,**/*.xml</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-brp-art-data-testdata</id>
                                <phase>generate-resources</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp.art.data</groupId>
                                            <artifactId>brp-art-data-testdata</artifactId>
                                            <version>${project.brp.art.data.versie}</version>
                                            <classifier>sql</classifier>
                                            <type>zip</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/brp-art-data-testdata</outputDirectory>
                                            <includes>**/*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.liquibase</groupId>
                        <artifactId>liquibase-maven-plugin</artifactId>
                        <executions>
                            <!-- Maak de structuur van de BRP database en vul deze met stamgegevens -->
                            <execution>
                                <id>maak-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/brp-databases.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <!-- Alles in 1 database in dit profiel -->
                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <!-- Maak een database voor een voorbeeld afnemer -->
                            <execution>
                                <id>maak-afnemer-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>false</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/afnemervoorbeeld.xml</changeLogFile>
                                    <driver>${db.afnemer.driver}</driver>
                                    <url>${db.afnemer.url}</url>
                                    <username>${db.afnemer.username}</username>
                                    <password>${db.afnemer.password}</password>
                                </configuration>
                            </execution>
                            <!-- Voer een SQL update uit om specifieke test tabellen te maken -->
                            <execution>
                                <id>update-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>false</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/test-database-update.xml</changeLogFile>
                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <!-- Schoon de activemq database op, zodat er geen oude berichten blijven staan. -->
                            <execution>
                                <id>clear-activemq</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/activemq.xml</changeLogFile>
                                    <driver>${db.activemq.driver}</driver>
                                    <url>${db.activemq.url}</url>
                                    <username>${db.activemq.username}</username>
                                    <password>${db.activemq.password}</password>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- Vul de database met testdata -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>sql-maven-plugin</artifactId>
                        <version>1.5</version>
                        <configuration>
                            <driver>${db.kern.driver}</driver>
                            <url>${db.kern.url}</url>
                            <username>${db.kern.username}</username>
                            <password>${db.kern.password}</password>
                        </configuration>
                        <executions>
                            <execution>
                                <id>fill-data</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>execute</goal>
                                </goals>
                                <configuration>
                                    <autocommit>true</autocommit>
                                    <srcFiles>
                                        <srcFile>${project.build.directory}/brp-art-data-testdata/art-testdata.sql</srcFile>
                                    </srcFiles>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- Bewaart de SQLs per persoon zodat personen "gereset" kunnen worden -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>backup-db</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <arguments>
                                        <argument>-b</argument>
                                        <argument>-d</argument>
                                        <argument>${db.kern.url}</argument>
                                        <argument>-u</argument>
                                        <argument>${db.kern.username}</argument>
                                        <argument>-p</argument>
                                        <argument>${db.kern.password}</argument>
                                    </arguments>
                                    <mainClass>nl.bzk.brp.art.util.main.UtilRunner</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>create-leveren-db</id>
            <activation>
                <property>
                    <name>create-test-db</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <version>2.8</version>
                        <executions>
                            <!-- Pak de dependencies uit met daarin alle SQL bestanden voor de database en de vulling -->
                            <execution>
                                <id>unpack-brp-algemeen-opslag-database</id>
                                <phase>generate-resources</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp.algemeen.opslag</groupId>
                                            <artifactId>brp-algemeen-opslag-database</artifactId>
                                            <version>${project.brp.database.versie}</version>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/brp-algemeen-opslag-database</outputDirectory>
                                            <includes>**/*.sql,**/*.xml</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <!--<execution>
                                <id>unpack-brp-art-data-testdata</id>
                                <phase>generate-resources</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp.art.data</groupId>
                                            <artifactId>brp-art-data-testdata</artifactId>
                                            <version>${project.brp.art.data.versie}</version>
                                            <classifier>sql</classifier>
                                            <type>zip</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/brp-art-data-testdata</outputDirectory>
                                            <includes>**/*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>-->
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.liquibase</groupId>
                        <artifactId>liquibase-maven-plugin</artifactId>
                        <executions>
                            <!-- Maak de structuur van de BRP database en vul deze met stamgegevens -->
                            <execution>
                                <id>maak-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <changeLogFile>changeset/brp-databases.xml</changeLogFile>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <!-- Alles in 1 database in dit profiel -->
                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <!-- Maak een database voor een voorbeeld afnemer -->
                            <execution>
                                <id>maak-afnemer-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>false</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/afnemervoorbeeld.xml</changeLogFile>
                                    <driver>${db.afnemer.driver}</driver>
                                    <url>${db.afnemer.url}</url>
                                    <username>${db.afnemer.username}</username>
                                    <password>${db.afnemer.password}</password>
                                </configuration>
                            </execution>
                            <!-- Voer een SQL update uit om specifieke test tabellen te maken -->
                            <execution>
                                <id>update-database</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>false</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/test-database-update.xml</changeLogFile>
                                    <driver>${db.kern.driver}</driver>
                                    <url>${db.kern.url}</url>
                                    <username>${db.kern.username}</username>
                                    <password>${db.kern.password}</password>
                                </configuration>
                            </execution>
                            <!-- Schoon de activemq database op, zodat er geen oude berichten blijven staan. -->
                            <execution>
                                <id>clear-activemq</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>update</goal>
                                </goals>
                                <configuration>
                                    <dropFirst>true</dropFirst>
                                    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                                    <changeLogFile>changeset/activemq.xml</changeLogFile>
                                    <driver>${db.activemq.driver}</driver>
                                    <url>${db.activemq.url}</url>
                                    <username>${db.activemq.username}</username>
                                    <password>${db.activemq.password}</password>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- Vul de database met testdata -->
                    <!--<plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>sql-maven-plugin</artifactId>
                        <version>1.5</version>
                        <configuration>
                            <driver>${db.kern.driver}</driver>
                            <url>${db.kern.url}</url>
                            <username>${db.kern.username}</username>
                            <password>${db.kern.password}</password>
                        </configuration>
                        <executions>
                            <execution>
                                <id>fill-data</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>execute</goal>
                                </goals>
                                <configuration>
                                    <autocommit>true</autocommit>
                                    <srcFiles>
                                        <srcFile>${project.build.directory}/brp-art-data-testdata/art-testdata.sql</srcFile>
                                    </srcFiles>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>-->
                    <!-- Bewaart de SQLs per persoon zodat personen "gereset" kunnen worden -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>backup-db</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <arguments>
                                        <argument>-b</argument>
                                        <argument>-d</argument>
                                        <argument>${db.kern.url}</argument>
                                        <argument>-u</argument>
                                        <argument>${db.kern.username}</argument>
                                        <argument>-p</argument>
                                        <argument>${db.kern.password}</argument>
                                    </arguments>
                                    <mainClass>nl.bzk.brp.art.util.main.UtilRunner</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
