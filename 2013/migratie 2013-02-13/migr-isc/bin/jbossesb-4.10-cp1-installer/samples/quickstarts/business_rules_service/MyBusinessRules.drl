#created on: Oct 30, 2006
package com.jboss.soa.esb.routing.cbr

#list any import classes here.
import org.jboss.soa.esb.message.Message;
import org.jboss.soa.esb.message.format.MessageType;
import org.jboss.soa.esb.samples.quickstart.businessrules.dvdstore.OrderHeader;
import org.jboss.soa.esb.samples.quickstart.businessrules.dvdstore.Customer;

global java.util.List destinations;



rule "Logging"
when 
   order: OrderHeader()
   customer: Customer()
then
   System.out.println("Customer Status: " + customer.getStatus());
   System.out.println("Order Total: " + order.getTotalAmount());
end

rule "Customer Platinum Status"
 when
   customer: Customer(status > 50)
   order: OrderHeader(totalAmount > 50)
 then
   System.out.println("Platinum Customer - High Priority");
   order.setOrderPriority(3);
end 

rule "Customer Gold Status"
 when
   customer: Customer(status > 10, status <= 50)
   order: OrderHeader(totalAmount > 25)
 then
   System.out.println("Gold Customer - Medium Priority ");
   order.setOrderPriority(2);
end 



   
