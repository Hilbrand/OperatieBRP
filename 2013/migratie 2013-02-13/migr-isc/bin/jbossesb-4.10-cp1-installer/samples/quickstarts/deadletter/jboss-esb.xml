<?xml version = "1.0" encoding = "UTF-8"?>
<jbossesb xmlns="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd http://anonsvn.jboss.org/repos/labs/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd"
    parameterReloadSecs="5">

    <providers>
          <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
              <jms-bus busid="quickstartGwChannel">
                  <jms-message-filter
                      dest-type="QUEUE"
                      dest-name="queue/quickstart_deadletter_Request_gw"
                   />
              </jms-bus>
              <jms-bus busid="quickstartEsbChannel">
                  <jms-message-filter
                      dest-type="QUEUE"
                      dest-name="queue/quickstart_deadletter_Request_esb"
                  />
              </jms-bus>

          </jms-provider>
      </providers>
      
      <services>
        <service 
        	category="FirstServiceESB" 
        	name="MyFailingActionListener" 
        	description="Action is going to fail and send a message to the Dead Letter Service">
            <listeners>
                <jms-listener name="JMS-Gateway"
                    busidref="quickstartGwChannel"
                    is-gateway="true"
                />
                <jms-listener name="helloWorld"
                              busidref="quickstartEsbChannel"
                />
            </listeners>
            <actions mep="OneWay">
            	<!-- Print the message to the console -->
                <action name="notificationAction" class="org.jboss.soa.esb.actions.Notifier">
               		<property name="okMethod" value="notifyOK" />
               		<property name="notification-details">
   	 				   <NotificationList type="OK"> 
      				     <target class="NotifyConsole" />
	    		   	   </NotificationList> 
	    		   </property>
   	   			</action>
                <!-- Send message to My Action -->
                <action name="MyFailingAction"  class="org.jboss.soa.esb.samples.quickstart.deadletter.MyFailingAsyncAction"/>
                <action name="MyFailingSyncAction"  class="org.jboss.soa.esb.samples.quickstart.deadletter.MyFailingSyncAction"/>
                    <action name="action2" class="org.jboss.soa.esb.actions.SystemPrintln">
                      <property name="printfull" value="true"/>
                    </action>
                    <action name="testStore" class="org.jboss.soa.esb.actions.TestMessageStore"/>

	   </actions>
         </service>
      </services>
     
</jbossesb>
